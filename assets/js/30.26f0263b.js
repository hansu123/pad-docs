(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{385:function(t,s,a){"use strict";a.r(s);var e=a(1),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"api开发规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api开发规范","aria-hidden":"true"}},[t._v("#")]),t._v(" api开发规范")]),t._v(" "),a("h3",{attrs:{id:"一-对uniapp的请求的二次封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-对uniapp的请求的二次封装","aria-hidden":"true"}},[t._v("#")]),t._v(" 一. 对uniapp的请求的二次封装")]),t._v(" "),a("blockquote",[a("p",[t._v("开发前请先看http.js和request.js这两个文件")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("http.js借鉴了axios的实现方法。")])]),t._v(" "),a("li",[a("p",[t._v("request.js内部使用了请求拦截和响应拦截。")])]),t._v(" "),a("li",[a("p",[t._v("uni.app中已经自带请求的API，所以在request.js中封装了get，post如果想要扩展，自己加原型方法即可。")])])]),t._v(" "),a("p",[t._v("封装axios文档实现："),a("a",{attrs:{href:"https://juejin.im/post/5d1591bfe51d454fa33b18f6",target:"_blank",rel:"noopener noreferrer"}},[t._v("个人掘金地址"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"二-index-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-index-js","aria-hidden":"true"}},[t._v("#")]),t._v(" 二. index.js")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("插件自动检测Api目录下的js文件，并生成对应的Model")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/models"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nfiles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fileName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/(^\\.\\/)|(\\.js$)/g")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Model"')]),t._v("\n\tmodels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" Apis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("models\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Apis\n")])])]),a("h3",{attrs:{id:"三-开发api规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-开发api规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 三. 开发Api规范")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建对应目录的js文件，并创建Model类，类名必须以Model结尾")])]),t._v(" "),a("li",[a("p",[t._v("在文件中引入request.js，使用model类继承request.js即可使用get或post方法")])]),t._v(" "),a("li",[a("p",[t._v("最后导出Model类的实例即可")])]),t._v(" "),a("li",[a("p",[t._v("index.js文件会自动检测目录，导出文件名+Model的对象")])]),t._v(" "),a("li",[a("p",[t._v("组件中直接使用"),a("code",[t._v("this.$Api.xxModel.方法名")]),t._v("即可调用接口")])])])])},[],!1,null,null,null);s.default=n.exports}}]);